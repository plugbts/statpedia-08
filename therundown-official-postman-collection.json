{
  "info": {
    "name": "TheRundown.io Official API - Statpedia Integration",
    "description": "Official TheRundown API endpoints based on documentation for Statpedia dual system",
    "version": "3.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "apikey",
    "apikey": [
      {
        "key": "key",
        "value": "X-RapidAPI-Key",
        "type": "string"
      },
      {
        "key": "value",
        "value": "{{therundown_api_key}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "therundown_rapidapi_host",
      "value": "therundown-v1.p.rapidapi.com",
      "type": "string"
    },
    {
      "key": "therundown_api_key",
      "value": "ef9ac9bff0mshbbf0d0fa5c5de6bp1cb40ajsn49acdbd702a0",
      "type": "string"
    },
    {
      "key": "current_date",
      "value": "2025-01-05",
      "type": "string"
    },
    {
      "key": "nfl_sport_id",
      "value": "2",
      "type": "string"
    },
    {
      "key": "nba_sport_id",
      "value": "4",
      "type": "string"
    },
    {
      "key": "mlb_sport_id",
      "value": "3",
      "type": "string"
    },
    {
      "key": "nhl_sport_id",
      "value": "1",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "V1 Endpoints (Core Data)",
      "item": [
        {
          "name": "Get Available Sports",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "X-RapidAPI-Key",
                "value": "{{therundown_api_key}}"
              },
              {
                "key": "X-RapidAPI-Host",
                "value": "{{therundown_rapidapi_host}}"
              }
            ],
            "url": {
              "raw": "https://{{therundown_rapidapi_host}}/sports",
              "protocol": "https",
              "host": ["{{therundown_rapidapi_host}}"],
              "path": ["sports"]
            },
            "description": "Get list of available sports and their IDs"
          }
        },
        {
          "name": "Get NFL Events by Date",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "X-RapidAPI-Key",
                "value": "{{therundown_api_key}}"
              },
              {
                "key": "X-RapidAPI-Host",
                "value": "{{therundown_rapidapi_host}}"
              }
            ],
            "url": {
              "raw": "https://{{therundown_rapidapi_host}}/{{nfl_sport_id}}/events/{{current_date}}?include=scores",
              "protocol": "https",
              "host": ["{{therundown_rapidapi_host}}"],
              "path": ["{{nfl_sport_id}}", "events", "{{current_date}}"],
              "query": [
                {
                  "key": "include",
                  "value": "scores",
                  "description": "Include scores in response"
                }
              ]
            },
            "description": "Get NFL events for a specific date with scores"
          }
        },
        {
          "name": "Get NBA Events by Date",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "X-RapidAPI-Key",
                "value": "{{therundown_api_key}}"
              },
              {
                "key": "X-RapidAPI-Host",
                "value": "{{therundown_rapidapi_host}}"
              }
            ],
            "url": {
              "raw": "https://{{therundown_rapidapi_host}}/{{nba_sport_id}}/events/{{current_date}}?include=scores",
              "protocol": "https",
              "host": ["{{therundown_rapidapi_host}}"],
              "path": ["{{nba_sport_id}}", "events", "{{current_date}}"],
              "query": [
                {
                  "key": "include",
                  "value": "scores"
                }
              ]
            },
            "description": "Get NBA events for a specific date with scores"
          }
        },
        {
          "name": "Get Available Dates for NFL",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "X-RapidAPI-Key",
                "value": "{{therundown_api_key}}"
              },
              {
                "key": "X-RapidAPI-Host",
                "value": "{{therundown_rapidapi_host}}"
              }
            ],
            "url": {
              "raw": "https://{{therundown_rapidapi_host}}/{{nfl_sport_id}}/dates",
              "protocol": "https",
              "host": ["{{therundown_rapidapi_host}}"],
              "path": ["{{nfl_sport_id}}", "dates"]
            },
            "description": "Get dates that have odds for NFL events"
          }
        },
        {
          "name": "Get Affiliates (Sportsbooks)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "X-RapidAPI-Key",
                "value": "{{therundown_api_key}}"
              },
              {
                "key": "X-RapidAPI-Host",
                "value": "{{therundown_rapidapi_host}}"
              }
            ],
            "url": {
              "raw": "https://{{therundown_rapidapi_host}}/affiliates",
              "protocol": "https",
              "host": ["{{therundown_rapidapi_host}}"],
              "path": ["affiliates"]
            },
            "description": "Get available sportsbooks and their affiliate IDs"
          }
        }
      ]
    },
    {
      "name": "V2 Endpoints (Player Props & Markets)",
      "item": [
        {
          "name": "Get V2 NFL Events with Player Props",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "X-RapidAPI-Key",
                "value": "{{therundown_api_key}}"
              },
              {
                "key": "X-RapidAPI-Host",
                "value": "{{therundown_rapidapi_host}}"
              }
            ],
            "url": {
              "raw": "https://{{therundown_rapidapi_host}}/v2/{{nfl_sport_id}}/events/{{current_date}}?include=scores&market_ids=4,5,6,7,8,9,10,11,12,13,14,15&participant_type=TYPE_PLAYER",
              "protocol": "https",
              "host": ["{{therundown_rapidapi_host}}"],
              "path": ["v2", "{{nfl_sport_id}}", "events", "{{current_date}}"],
              "query": [
                {
                  "key": "include",
                  "value": "scores"
                },
                {
                  "key": "market_ids",
                  "value": "4,5,6,7,8,9,10,11,12,13,14,15",
                  "description": "Player prop market IDs"
                },
                {
                  "key": "participant_type",
                  "value": "TYPE_PLAYER",
                  "description": "Filter for player participants"
                }
              ]
            },
            "description": "Get V2 NFL events with player prop markets"
          }
        },
        {
          "name": "Get V2 NBA Events with Player Props",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "X-RapidAPI-Key",
                "value": "{{therundown_api_key}}"
              },
              {
                "key": "X-RapidAPI-Host",
                "value": "{{therundown_rapidapi_host}}"
              }
            ],
            "url": {
              "raw": "https://{{therundown_rapidapi_host}}/v2/{{nba_sport_id}}/events/{{current_date}}?include=scores&market_ids=4,5,6,7,8,9,10,11,12,13,14,15&participant_type=TYPE_PLAYER",
              "protocol": "https",
              "host": ["{{therundown_rapidapi_host}}"],
              "path": ["v2", "{{nba_sport_id}}", "events", "{{current_date}}"],
              "query": [
                {
                  "key": "include",
                  "value": "scores"
                },
                {
                  "key": "market_ids",
                  "value": "4,5,6,7,8,9,10,11,12,13,14,15"
                },
                {
                  "key": "participant_type",
                  "value": "TYPE_PLAYER"
                }
              ]
            },
            "description": "Get V2 NBA events with player prop markets"
          }
        },
        {
          "name": "Get Markets for Event",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "X-RapidAPI-Key",
                "value": "{{therundown_api_key}}"
              },
              {
                "key": "X-RapidAPI-Host",
                "value": "{{therundown_rapidapi_host}}"
              }
            ],
            "url": {
              "raw": "https://{{therundown_rapidapi_host}}/v2/events/{{event_id}}/markets?participant_type=TYPE_PLAYER",
              "protocol": "https",
              "host": ["{{therundown_rapidapi_host}}"],
              "path": ["v2", "events", "{{event_id}}", "markets"],
              "query": [
                {
                  "key": "participant_type",
                  "value": "TYPE_PLAYER"
                }
              ]
            },
            "description": "Get available markets for a specific event (replace {{event_id}})"
          }
        },
        {
          "name": "Get Market Participants",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "X-RapidAPI-Key",
                "value": "{{therundown_api_key}}"
              },
              {
                "key": "X-RapidAPI-Host",
                "value": "{{therundown_rapidapi_host}}"
              }
            ],
            "url": {
              "raw": "https://{{therundown_rapidapi_host}}/v2/markets/participants?event_id={{event_id}}&participant_type=TYPE_PLAYER",
              "protocol": "https",
              "host": ["{{therundown_rapidapi_host}}"],
              "path": ["v2", "markets", "participants"],
              "query": [
                {
                  "key": "event_id",
                  "value": "{{event_id}}",
                  "description": "Event ID to get participants for"
                },
                {
                  "key": "participant_type",
                  "value": "TYPE_PLAYER"
                }
              ]
            },
            "description": "Get participants (players) for markets (replace {{event_id}})"
          }
        },
        {
          "name": "Get All Available Markets",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "X-RapidAPI-Key",
                "value": "{{therundown_api_key}}"
              },
              {
                "key": "X-RapidAPI-Host",
                "value": "{{therundown_rapidapi_host}}"
              }
            ],
            "url": {
              "raw": "https://{{therundown_rapidapi_host}}/v2/markets",
              "protocol": "https",
              "host": ["{{therundown_rapidapi_host}}"],
              "path": ["v2", "markets"]
            },
            "description": "Get all available markets across all sports"
          }
        }
      ]
    },
    {
      "name": "Teams & Players",
      "item": [
        {
          "name": "Get NFL Teams",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "X-RapidAPI-Key",
                "value": "{{therundown_api_key}}"
              },
              {
                "key": "X-RapidAPI-Host",
                "value": "{{therundown_rapidapi_host}}"
              }
            ],
            "url": {
              "raw": "https://{{therundown_rapidapi_host}}/sports/{{nfl_sport_id}}/teams",
              "protocol": "https",
              "host": ["{{therundown_rapidapi_host}}"],
              "path": ["sports", "{{nfl_sport_id}}", "teams"]
            },
            "description": "Get teams for NFL"
          }
        },
        {
          "name": "Get Team Players (V2)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              },
              {
                "key": "X-RapidAPI-Key",
                "value": "{{therundown_api_key}}"
              },
              {
                "key": "X-RapidAPI-Host",
                "value": "{{therundown_rapidapi_host}}"
              }
            ],
            "url": {
              "raw": "https://{{therundown_rapidapi_host}}/v2/teams/{{team_id}}/players",
              "protocol": "https",
              "host": ["{{therundown_rapidapi_host}}"],
              "path": ["v2", "teams", "{{team_id}}", "players"]
            },
            "description": "Get players for a specific team (replace {{team_id}})"
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Set current date if not already set",
          "if (!pm.environment.get('current_date')) {",
          "    const today = new Date().toISOString().split('T')[0];",
          "    pm.environment.set('current_date', today);",
          "}",
          "",
          "// Set sample event_id for testing (you'll need to replace with real event ID)",
          "if (!pm.environment.get('event_id')) {",
          "    pm.environment.set('event_id', 'sample_event_id_replace_with_real');",
          "}",
          "",
          "// Set sample team_id for testing (you'll need to replace with real team ID)",
          "if (!pm.environment.get('team_id')) {",
          "    pm.environment.set('team_id', 'sample_team_id_replace_with_real');",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Test for successful response",
          "pm.test('Status code is 200', function () {",
          "    pm.response.to.have.status(200);",
          "});",
          "",
          "// Test for JSON response",
          "pm.test('Response is JSON', function () {",
          "    pm.response.to.be.json;",
          "});",
          "",
          "// Log response details",
          "const responseJson = pm.response.json();",
          "const responseSize = pm.response.responseSize;",
          "console.log(`Response size: ${(responseSize / 1024).toFixed(2)} KB`);",
          "",
          "// Log data structure for debugging",
          "if (responseJson.events) {",
          "    console.log(`Events found: ${responseJson.events.length}`);",
          "} else if (responseJson.sports) {",
          "    console.log(`Sports found: ${responseJson.sports.length}`);",
          "} else if (responseJson.markets) {",
          "    console.log(`Markets found: ${responseJson.markets.length}`);",
          "} else if (responseJson.participants) {",
          "    console.log(`Participants found: ${responseJson.participants.length}`);",
          "} else {",
          "    console.log('Response structure:', Object.keys(responseJson));",
          "}",
          "",
          "// Check for rate limiting",
          "if (pm.response.code === 429) {",
          "    console.log('⚠️ Rate limit hit - consider adding delays between requests');",
          "} else if (pm.response.code === 404) {",
          "    console.log('❌ Endpoint not found - check URL structure');",
          "} else if (pm.response.code === 403) {",
          "    console.log('🔒 Authentication error - check API key');",
          "}"
        ]
      }
    }
  ]
}
